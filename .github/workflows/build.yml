name: Build
on: [push, pull_request]

jobs:
    build_on_linux:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - uses: actions/setup-node@master
              with:
                  node-version: 16
              run: sudo apt-get install libimagequant-dev
            - name: install dependencies
              run: yarn --frozen-lockfile
            - name: build
              run: yarn run make

    build_on_mac:
        runs-on: macos-latest
        steps:
            - uses: actions/checkout@v2
            - uses: actions/setup-node@master
              with:
                  node-version: 16
<<<<<<< HEAD
=======
            - name install libimagequant
>>>>>>> de993bf57f17af1e8d1d7cf0f3b8784f296b552b
              run: brew install libimagequant
            - name: install dependencies
              run: yarn --frozen-lockfile
            - name: build
              run: yarn run make

    build_on_win:
        runs-on: windows-latest
        steps:
            - uses: actions/checkout@v2
            - uses: actions/setup-node@master
              with:
                  node-version: 16
            - name: install dependencies
              run: yarn --frozen-lockfile
            - name: build
              run: yarn run make
